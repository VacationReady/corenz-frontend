(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[884],{3089:function(e,t,r){Promise.resolve().then(r.bind(r,3907))},3907:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(9268),n=r(6008),a=r(6006);function o(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),r=t.get("token"),[o,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{r||d("Activation token is missing. Please check your email link.")},[r]);let p=async t=>{if(t.preventDefault(),d(""),h(""),!r)return d("Missing activation token.");if(o.length<6)return d("Password must be at least 6 characters.");if(o!==l)return d("Passwords do not match.");try{x(!0);let t=await fetch("/api/activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,password:o})}),s=null;try{s=await t.json()}catch(e){}if(!t.ok)throw Error((null==s?void 0:s.error)||"Something went wrong.");h("Password set! Redirecting to login..."),setTimeout(()=>e.push("/login"),2e3)}catch(e){d(e.message||"Unexpected error")}finally{x(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white p-8 shadow-xl rounded-2xl",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-3",children:(0,s.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{width:"100",height:"100",rx:"20",fill:"#000"}),(0,s.jsx)("text",{x:"50%",y:"55%",textAnchor:"middle",fill:"white",fontSize:"28",fontFamily:"Arial, sans-serif",dy:".3em",children:"CNZ"})]})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Activate Your CoreNZ Account"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Set your password to get started"})]}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsx)("input",{type:"password",placeholder:"New Password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:o,onChange:e=>i(e.target.value)}),(0,s.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:l,onChange:e=>c(e.target.value)}),u&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:u}),f&&(0,s.jsx)("p",{className:"text-green-600 text-sm",children:f}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded-lg hover:bg-gray-800 transition",disabled:m,children:m?"Submitting...":"Set Password"})]})]})})}},3177:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(6006),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,a={},c=null,u=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:u,props:a,_owner:i.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9268:function(e,t,r){"use strict";e.exports=r(3177)},6008:function(e,t,r){e.exports=r(167)}},function(e){e.O(0,[667,139,744],function(){return e(e.s=3089)}),_N_E=e.O()}]);